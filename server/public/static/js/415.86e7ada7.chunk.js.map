{"version":3,"file":"static/js/415.86e7ada7.chunk.js","mappings":"qKAKQA,EAAWC,EAAAA,EAAAA,OAoCnB,UAlCa,WACX,OAAwBC,EAAAA,EAAAA,UAAS,IAAjC,eAAOC,EAAP,KAAaC,EAAb,KAeA,OAdAC,EAAAA,EAAAA,YAAU,YACRC,EAAAA,EAAAA,MAAUC,MAAK,SAACC,GACd,IAAIC,EAAU,GACd,IAAK,IAAIC,KAASF,EAAIL,KACpBM,EAAQE,KAAK,CACXC,IAAKF,EAAMG,MAAM,KAAK,GACtBH,MAAOA,EAAMG,MAAM,KAAK,GACxBC,MAAON,EAAIL,KAAKO,GAChBK,MAAM,IAAIC,MAAOC,uBAGrBb,EAAQK,QAET,KAED,4BACE,UAAC,IAAD,CAAOS,WAAYf,EAAnB,WACE,SAACH,EAAD,CAAQmB,MAAM,eAAKC,UAAU,SAAY,UACzC,SAACpB,EAAD,CACEmB,MAAM,2BAENE,OAAQ,SAACC,EAAGC,GAAJ,OACN,SAAC,KAAD,CAAMC,GAAI,gBAAkBD,EAAOX,IAAnC,SAAyCW,EAAOT,UAF9C,UAKN,SAACd,EAAD,CAAQmB,MAAM,eAAKC,UAAU,QAAW,WAV5C,S,+eCrBEK,EAAOC,IAAAA,OAAa,CACxBC,QAASC,UAGXH,EAAKI,aAAaC,QAAQC,KACxB,SAACC,GAIC,OAHIC,aAAaC,cACfF,EAAOG,QAAQC,cAAgB,UAAYH,aAAaC,aAEnDF,KAET,SAACK,GACC,OAAOC,QAAQC,OAAOF,MAI1BZ,EAAKI,aAAaW,SAAST,KACzB,SAACvB,GAIC,OAHIA,EAAIL,KAAKsC,SACXA,EAAAA,GAAAA,QAAgBjC,EAAIL,KAAKsC,SAEpBjC,KAET,SAAC6B,GASC,OAR4B,MAAxBA,EAAIG,SAASE,SACfT,aAAaU,WAAW,eACxBC,QAAQC,IAAIC,OAAOC,SAASC,SAASC,QAAQ,WAEM,IAA/CH,OAAOC,SAASC,SAASC,QAAQ,WACnCH,OAAOC,SAASC,SAAW,WAG3BX,EAAIG,SAASrC,MACfsC,EAAAA,GAAAA,MAAcJ,EAAIG,SAASrC,MACpBmC,QAAQC,OAAOF,IAEjBC,QAAQC,OAAOF,MAI1B,QCzCaa,EAAW,SAACC,GAAD,OAAW1B,EAAAA,KAAU,SAAU0B,IAE1CC,EAAc,SAACD,GAAD,OAAW1B,EAAAA,KAAU,YAAa0B,IAEhDE,EAAU,kBAAM5B,EAAAA,IAAS,UAEzB6B,EAAc,SAACH,GAAD,OAAW1B,EAAAA,IAAS,QAAS0B,IAE3CI,EAAS,kBAAM9B,EAAAA,IAAS,SAExB+B,EAAY,SAACL,GAAD,OAAW1B,EAAAA,KAAU,OAAQ0B,IAEzCM,EAAa,SAACN,GAAD,OAAW1B,EAAAA,IAAS,OAAQ0B,IAEzCO,EAAY,SAACC,GAAD,OAAYlC,EAAAA,OAAY,OAAQ,CAAEkC,OAAAA,KAE9CC,EAAW,kBAAMnC,EAAAA,IAAS,WAE1BoC,EAAc,SAACV,GAAD,OAAW1B,EAAAA,KAAU,SAAU0B,IAE7CW,EAAe,SAACX,GAAD,OAAW1B,EAAAA,IAAS,SAAU0B,IAE7CY,EAAc,SAACJ,GAAD,OAAYlC,EAAAA,OAAY,SAAU,CAAEkC,OAAAA,KAElDK,EAAe,kBAAMvC,EAAAA,IAAS,eAE9BwC,EAAmB,SAACd,GAAD,OAAW1B,EAAAA,KAAU,aAAc0B,IAEtDe,EAAW,SAACf,GAAD,OAAW1B,EAAAA,IAAS,SAAU0B,IAIzC7C,EAAU,kBAAMmB,EAAAA,IAAS,WAEzB0C,EAAe,SAAChB,GAAD,OAAW1B,EAAAA,IAAS,UAAW0B,IAE9CiB,EAAgB,SAACjB,GAAD,OAAW1B,EAAAA,KAAU,UAAW0B","sources":["pages/Home.jsx","utils/http.js","utils/api.js"],"sourcesContent":["import { useEffect, useState } from 'react';\nimport { Table } from 'antd';\nimport { HomeApi } from '../utils/api';\nimport { Link } from 'react-router-dom';\n\nconst { Column } = Table;\n\nconst Home = () => {\n  const [data, setData] = useState([]);\n  useEffect(() => {\n    HomeApi().then((res) => {\n      let newData = [];\n      for (let agent in res.data) {\n        newData.push({\n          key: agent.split('-')[1],\n          agent: agent.split('-')[0],\n          count: res.data[agent],\n          time: new Date().toLocaleDateString(),\n        });\n      }\n      setData(newData);\n    });\n  }, []);\n  return (\n    <div>\n      <Table dataSource={data}>\n        <Column title=\"代理\" dataIndex=\"agent\" key=\"agent\" />\n        <Column\n          title=\"访问次数\"\n          key=\"count\"\n          render={(_, record) => (\n            <Link to={'/admin/stats/' + record.key}>{record.count}</Link>\n          )}\n        />\n        <Column title=\"时间\" dataIndex=\"time\" key=\"time\" />\n      </Table>\n      ,\n    </div>\n  );\n};\n\nexport default Home;\n","import axios from 'axios';\nimport { message } from 'antd';\n\nconst http = axios.create({\n  baseURL: process.env.REACT_APP_SERVER_PORT,\n});\n\nhttp.interceptors.request.use(\n  (config) => {\n    if (localStorage.__web_token) {\n      config.headers.Authorization = 'Bearer ' + localStorage.__web_token;\n    }\n    return config;\n  },\n  (err) => {\n    return Promise.reject(err);\n  }\n);\n\nhttp.interceptors.response.use(\n  (res) => {\n    if (res.data.message) {\n      message.success(res.data.message);\n    }\n    return res;\n  },\n  (err) => {\n    if (err.response.status === 401) {\n      localStorage.removeItem('__web_token');\n      console.log(window.location.pathname.indexOf('login'));\n\n      if (window.location.pathname.indexOf('login') === -1) {\n        window.location.pathname = '/login';\n      }\n    }\n    if (err.response.data) {\n      message.error(err.response.data);\n      return Promise.reject(err);\n    }\n    return Promise.reject(err);\n  }\n);\n\nexport default http;\n","import http from './http';\n\nexport const LoginApi = (model) => http.post('/login', model);\n\nexport const RegisterApi = (model) => http.post('/register', model);\n\nexport const UserApi = () => http.get('/user');\n\nexport const UserEditApi = (model) => http.put('/user', model);\n\nexport const UrlApi = () => http.get('/url');\n\nexport const UrlAddApi = (model) => http.post('/url', model);\n\nexport const UrlEditApi = (model) => http.put('/url', model);\n\nexport const UrlDelApi = (params) => http.delete('/url', { params });\n\nexport const AgentApi = () => http.get('/agent');\n\nexport const AgentAddApi = (model) => http.post('/agent', model);\n\nexport const AgentEditApi = (model) => http.put('/agent', model);\n\nexport const AgentDelApi = (params) => http.delete('/agent', { params });\n\nexport const PromotionApi = () => http.get('/promotion');\n\nexport const PromotionEditApi = (model) => http.post('/promotion', model);\n\nexport const StatsApi = (model) => http.put('/stats', model);\n\nexport const StatsSearchApi = (model) => http.post('/stats', model);\n\nexport const HomeApi = () => http.get('/stats');\n\nexport const CommonImgApi = (model) => http.put('/common', model);\n\nexport const CommonDataApi = (model) => http.post('/common', model);\n"],"names":["Column","Table","useState","data","setData","useEffect","HomeApi","then","res","newData","agent","push","key","split","count","time","Date","toLocaleDateString","dataSource","title","dataIndex","render","_","record","to","http","axios","baseURL","process","interceptors","request","use","config","localStorage","__web_token","headers","Authorization","err","Promise","reject","response","message","status","removeItem","console","log","window","location","pathname","indexOf","LoginApi","model","RegisterApi","UserApi","UserEditApi","UrlApi","UrlAddApi","UrlEditApi","UrlDelApi","params","AgentApi","AgentAddApi","AgentEditApi","AgentDelApi","PromotionApi","PromotionEditApi","StatsApi","CommonImgApi","CommonDataApi"],"sourceRoot":""}