{"version":3,"file":"static/js/740.66e50599.chunk.js","mappings":"8SAkBMA,EAAe,SAACC,GACpB,IAAMC,EAA2B,eAAdD,EAAKE,MAAuC,cAAdF,EAAKE,KAItD,OAHKD,GACHE,EAAAA,GAAAA,MAAc,kFAETF,GAoNT,UAjNkB,WAChB,OAAgCG,EAAAA,EAAAA,UAAS,CACvCC,OAAQ,GACRC,IAAK,GACLC,IAAK,GACLC,SAAU,GACVC,OAAQ,GACRC,OAAQ,GACRC,MAAO,GACPC,MAAO,GACPC,SAAU,GACVC,MAAO,UACPC,QAASC,GAAAA,EAAO,IAAIC,MAAOC,aAX7B,eAAOC,EAAP,KAAiBC,EAAjB,MAcAC,EAAAA,EAAAA,YAAU,YACRC,EAAAA,EAAAA,MAAeC,MAAK,SAACC,GACnB,GAAIA,EAAIC,KAAKA,KAAM,CACjB,IAAIA,GAAI,kBACHD,EAAIC,KAAKA,MADN,IAENV,QAASC,GAAAA,CAAOQ,EAAIC,KAAKA,KAAKV,WAEhCK,EAAYK,SAGf,IACH,IAYMC,EAAW,SAACC,EAAOzB,GACvB,IAAM0B,GAAG,kBAAQT,GAAR,cAAmBjB,EAAOyB,IACnCP,EAAYQ,IAcd,OACE,UAAC,IAAD,CAAKC,OAAQ,GAAb,WACE,SAAC,IAAD,CAAKC,KAAM,EAAGC,MAAO,CAAEC,QAAS,GAAhC,UACE,gBAAKC,UAAU,SAAf,UACE,UAAC,IAAD,CACEC,KAAK,MACLC,SAAS,eACTF,UAAU,kBACVG,gBAAgB,EAChBC,OAAQC,eACRC,QAAS,CACPC,cAAc,UAAD,OAAYC,aAAaC,cAExC3C,aAAcA,EACd2B,SA1CW,SAACiB,GACpB,GAAyB,SAArBA,EAAK3C,KAAK4C,OAAmB,CAC/B,IAAMpB,EAAMmB,EAAK3C,KAAK6C,SACtB1C,EAAAA,GAAAA,QAAgBqB,EAAIrB,SACpB,IAAMyB,GAAG,kBACJT,GADI,IAEPN,SAAUW,EAAIX,WAEhBO,EAAYQ,KAwBR,UAYyB,KAAtBT,EAASN,UACR,gBACEiC,IAAKR,YAAyCnB,EAASN,SACvDkB,MAAO,CAAEgB,QAAS,QAASC,MAAO,UAGpC,IAEF,gBACEf,UAAU,OACVF,MAAO,CAAEkB,IAAK9B,EAASZ,IAAM,IAAK2C,KAAM/B,EAASb,IAAM,KAFzD,UAIE,SAAC,IAAD,CACE6C,GAAG,SACHxB,MAAM,oBACNyB,KAAMjC,EAASd,OACfgD,QAAQ,UACRtB,MAAO,CAAEuB,OAAQ,aAGrB,gBACErB,UAAU,OACVF,MAAO,CACLvB,SAAUW,EAASX,SACnByC,IAAK9B,EAAST,OAAS,IACvBwC,KAAM/B,EAASV,OAAS,IACxBK,MAAOK,EAASL,OANpB,2BAWA,gBACEmB,UAAU,OACVF,MAAO,CACLvB,SAAUW,EAASX,SACnByC,IAAK9B,EAASP,MAAQ,IACtBsC,KAAM/B,EAASR,MAAQ,IACvBG,MAAOK,EAASL,OANpB,kCAcN,SAAC,IAAD,CAAKgB,KAAM,GAAX,UACE,UAAC,IAAD,CACEI,KAAK,QACLqB,SAAU,CAAEzB,KAAM,GAClB0B,WAAY,CAAE1B,KAAM,IACpB2B,cAAe,CAAEC,UAAU,GAC3BC,SA1ES,WACf,IAAMC,GAAK,kBACNzC,GADM,IAETJ,QAA8C,IAArCC,GAAAA,CAAOG,EAASJ,QAAQ8C,IAAIC,UAEvCC,EAAAA,EAAAA,IAAiBH,IAsEXI,aAAa,MANf,WAQE,SAAC,SAAD,CAAWC,MAAM,iBAAjB,UACE,SAAC,IAAD,CACEC,IAAK,GACLC,KAAM,EACNxC,MAAOR,EAASd,OAChBqB,SAAU,SAACC,GAAD,OAAWD,EAASC,EAAO,gBAIzC,SAAC,SAAD,CAAWsC,MAAM,uBAAjB,UACE,SAAC,IAAD,CACEC,IAAK,GACLvC,MAAOR,EAASb,IAChBoB,SAAU,SAACC,GAAD,OAAWD,EAASC,EAAO,aAGzC,SAAC,SAAD,CAAWsC,MAAM,uBAAjB,UACE,SAAC,IAAD,CACEC,IAAK,GACLvC,MAAOR,EAASZ,IAChBmB,SAAU,SAACC,GAAD,OAAWD,EAASC,EAAO,aAIzC,SAAC,SAAD,CAAWsC,MAAM,2BAAjB,UACE,SAAC,IAAD,CACEC,IAAK,GACLvC,MAAOR,EAASX,SAChBkB,SAAU,SAACC,GAAD,OAAWD,EAASC,EAAO,kBAIzC,SAAC,SAAD,CAAWsC,MAAM,uCAAjB,UACE,SAAC,IAAD,CACEC,IAAK,GACLvC,MAAOR,EAASV,OAChBiB,SAAU,SAACC,GAAD,OAAWD,EAASC,EAAO,gBAGzC,SAAC,SAAD,CAAWsC,MAAM,uCAAjB,UACE,SAAC,IAAD,CACEC,IAAK,GACLvC,MAAOR,EAAST,OAChBgB,SAAU,SAACC,GAAD,OAAWD,EAASC,EAAO,gBAIzC,SAAC,SAAD,CAAWsC,MAAM,iCAAjB,UACE,SAAC,IAAD,CACEC,IAAK,GACLvC,MAAOR,EAASR,MAChBe,SAAU,SAACC,GAAD,OAAWD,EAASC,EAAO,eAGzC,SAAC,SAAD,CAAWsC,MAAM,iCAAjB,UACE,SAAC,IAAD,CACEC,IAAK,GACLvC,MAAOR,EAASP,MAChBc,SAAU,SAACC,GAAD,OAAWD,EAASC,EAAO,eAGzC,SAAC,SAAD,CAAWsC,MAAM,2BAAjB,UACE,SAAC,KAAD,CACEnD,MAAOK,EAASL,MAChBsD,iBAlJU,SAACtD,GACrB,IAAMc,GAAG,kBAAQT,GAAR,IAAkBL,MAAOA,EAAMuD,MACxCjD,EAAYQ,SAmJN,SAAC,SAAD,CAAWqC,MAAM,2BAAjB,UACE,SAAC,IAAD,CACEtC,MAAOR,EAASJ,QAChBW,SAAU,SAACC,GAAD,OAAWD,EAASC,EAAO,iBAIzC,SAAC,SAAD,CAAW6B,WAAY,CAAEc,OAAQ,EAAGxC,KAAM,IAA1C,UACE,SAAC,IAAD,CAAQ5B,KAAK,UAAUqE,SAAS,SAAhC,sC,+eC9NNC,EAAOC,IAAAA,OAAa,CACxBC,QAASpC,UAGXkC,EAAKG,aAAaC,QAAQC,KACxB,SAACC,GAIC,OAHIrC,aAAaC,cACfoC,EAAOvC,QAAQC,cAAgB,UAAYC,aAAaC,aAEnDoC,KAET,SAACC,GACC,OAAOC,QAAQC,OAAOF,MAI1BP,EAAKG,aAAa9B,SAASgC,KACzB,SAACrD,GAIC,OAHIA,EAAIC,KAAKtB,SACXA,EAAAA,GAAAA,QAAgBqB,EAAIC,KAAKtB,SAEpBqB,KAET,SAACuD,GASC,OAR4B,MAAxBA,EAAIlC,SAASD,SACfH,aAAayC,WAAW,eACxBC,QAAQC,IAAIC,OAAOC,SAASC,SAASC,QAAQ,WAEM,IAA/CH,OAAOC,SAASC,SAASC,QAAQ,WACnCH,OAAOC,SAASC,SAAW,WAG3BR,EAAIlC,SAASpB,MACftB,EAAAA,GAAAA,MAAc4E,EAAIlC,SAASpB,MACpBuD,QAAQC,OAAOF,IAEjBC,QAAQC,OAAOF,MAI1B,QCzCaU,EAAW,SAAC7B,GAAD,OAAWY,EAAAA,KAAU,SAAUZ,IAE1C8B,EAAc,SAAC9B,GAAD,OAAWY,EAAAA,KAAU,YAAaZ,IAEhD+B,EAAU,kBAAMnB,EAAAA,IAAS,UAEzBoB,EAAc,SAAChC,GAAD,OAAWY,EAAAA,IAAS,QAASZ,IAE3CiC,EAAS,kBAAMrB,EAAAA,IAAS,SAExBsB,EAAY,SAAClC,GAAD,OAAWY,EAAAA,KAAU,OAAQZ,IAEzCmC,EAAa,SAACnC,GAAD,OAAWY,EAAAA,IAAS,OAAQZ,IAEzCoC,EAAY,SAACC,GAAD,OAAYzB,EAAAA,OAAY,OAAQ,CAAEyB,OAAAA,KAE9CC,EAAW,kBAAM1B,EAAAA,IAAS,WAE1B2B,EAAc,SAACvC,GAAD,OAAWY,EAAAA,KAAU,SAAUZ,IAE7CwC,EAAe,SAACxC,GAAD,OAAWY,EAAAA,IAAS,SAAUZ,IAE7CyC,EAAc,SAACJ,GAAD,OAAYzB,EAAAA,OAAY,SAAU,CAAEyB,OAAAA,KAElD3E,EAAe,kBAAMkD,EAAAA,IAAS,eAE9BT,EAAmB,SAACH,GAAD,OAAWY,EAAAA,KAAU,aAAcZ,IAEtD0C,EAAW,SAAC1C,GAAD,OAAWY,EAAAA,IAAS,SAAUZ,IAIzC2C,EAAU,kBAAM/B,EAAAA,IAAS,WAEzBgC,EAAe,SAAC5C,GAAD,OAAWY,EAAAA,IAAS,UAAWZ,IAE9C6C,EAAgB,SAAC7C,GAAD,OAAWY,EAAAA,KAAU,UAAWZ,K","sources":["pages/Promotion.jsx","utils/http.js","utils/api.js"],"sourcesContent":["import {\n  Row,\n  Col,\n  Upload,\n  message,\n  Form,\n  Button,\n  InputNumber,\n  DatePicker,\n} from 'antd';\nimport moment from 'moment';\nimport QRCode from 'qrcode.react';\nimport { useEffect, useState } from 'react';\nimport { CompactPicker } from 'react-color';\nimport { PromotionApi, PromotionEditApi } from 'utils/api';\n\nimport 'assets/css/promotion.css';\n\nconst beforeUpload = (file) => {\n  const isJpgOrPng = file.type === 'image/jpeg' || file.type === 'image/png';\n  if (!isJpgOrPng) {\n    message.error('只允许上传png或jpg格式的图片！');\n  }\n  return isJpgOrPng;\n};\n\nconst Promotion = () => {\n  const [formData, setFormData] = useState({\n    qrSize: 70,\n    qrX: 40,\n    qrY: 40,\n    fontSize: 10,\n    agentX: 10,\n    agentY: 10,\n    dateX: 20,\n    dateY: 20,\n    fileName: '',\n    color: '#ffffff',\n    delTime: moment(new Date().getTime()),\n  });\n\n  useEffect(() => {\n    PromotionApi().then((res) => {\n      if (res.data.data) {\n        let data = {\n          ...res.data.data,\n          delTime: moment(res.data.data.delTime),\n        };\n        setFormData(data);\n      }\n    });\n  }, []);\n  const handleChange = (info) => {\n    if (info.file.status === 'done') {\n      const res = info.file.response;\n      message.success(res.message);\n      const obj = {\n        ...formData,\n        fileName: res.fileName,\n      };\n      setFormData(obj);\n    }\n  };\n\n  const onChange = (value, type) => {\n    const obj = { ...formData, [type]: value };\n    setFormData(obj);\n  };\n  const onColorChange = (color) => {\n    const obj = { ...formData, color: color.hex };\n    setFormData(obj);\n  };\n\n  const onFinish = () => {\n    const model = {\n      ...formData,\n      delTime: moment(formData.delTime._d).unix() * 1000,\n    };\n    PromotionEditApi(model);\n  };\n  return (\n    <Row gutter={24}>\n      <Col span={6} style={{ padding: 0 }}>\n        <div className=\"imgBox\">\n          <Upload\n            name=\"img\"\n            listType=\"picture-card\"\n            className=\"avatar-uploader\"\n            showUploadList={false}\n            action={process.env.REACT_APP_SERVER_PORT + 'uploads'}\n            headers={{\n              Authorization: `Bearer ${localStorage.__web_token}`,\n            }}\n            beforeUpload={beforeUpload}\n            onChange={handleChange}\n          >\n            {formData.fileName !== '' ? (\n              <img\n                src={process.env.REACT_APP_SERVER_PORT_FILE + formData.fileName}\n                style={{ display: 'block', width: '100%' }}\n              ></img>\n            ) : (\n              ''\n            )}\n            <div\n              className=\"code\"\n              style={{ top: formData.qrY + '%', left: formData.qrX + '%' }}\n            >\n              <QRCode\n                id=\"qrCode\"\n                value=\"https://baidu.com\"\n                size={formData.qrSize} // 二维码的大小\n                fgColor=\"#000000\" // 二维码的颜色\n                style={{ margin: 'auto' }}\n              ></QRCode>\n            </div>\n            <div\n              className=\"code\"\n              style={{\n                fontSize: formData.fontSize,\n                top: formData.agentY + '%',\n                left: formData.agentX + '%',\n                color: formData.color,\n              }}\n            >\n              文字\n            </div>\n            <div\n              className=\"code\"\n              style={{\n                fontSize: formData.fontSize,\n                top: formData.dateY + '%',\n                left: formData.dateX + '%',\n                color: formData.color,\n              }}\n            >\n              日期\n            </div>\n          </Upload>\n        </div>\n      </Col>\n      <Col span={18}>\n        <Form\n          name=\"basic\"\n          labelCol={{ span: 8 }}\n          wrapperCol={{ span: 16 }}\n          initialValues={{ remember: true }}\n          onFinish={onFinish}\n          autoComplete=\"off\"\n        >\n          <Form.Item label=\"QR大小\">\n            <InputNumber\n              min={70}\n              step={5}\n              value={formData.qrSize}\n              onChange={(value) => onChange(value, 'qrSize')}\n            />\n          </Form.Item>\n\n          <Form.Item label=\"QR横坐标\">\n            <InputNumber\n              min={10}\n              value={formData.qrX}\n              onChange={(value) => onChange(value, 'qrX')}\n            />\n          </Form.Item>\n          <Form.Item label=\"QR纵坐标\">\n            <InputNumber\n              min={10}\n              value={formData.qrY}\n              onChange={(value) => onChange(value, 'qrY')}\n            />\n          </Form.Item>\n\n          <Form.Item label=\"文字大小\">\n            <InputNumber\n              min={10}\n              value={formData.fontSize}\n              onChange={(value) => onChange(value, 'fontSize')}\n            />\n          </Form.Item>\n\n          <Form.Item label=\"代理名横坐标\">\n            <InputNumber\n              min={10}\n              value={formData.agentX}\n              onChange={(value) => onChange(value, 'agentX')}\n            />\n          </Form.Item>\n          <Form.Item label=\"代理名纵坐标\">\n            <InputNumber\n              min={10}\n              value={formData.agentY}\n              onChange={(value) => onChange(value, 'agentY')}\n            />\n          </Form.Item>\n\n          <Form.Item label=\"日期横坐标\">\n            <InputNumber\n              min={10}\n              value={formData.dateX}\n              onChange={(value) => onChange(value, 'dateX')}\n            />\n          </Form.Item>\n          <Form.Item label=\"日期纵坐标\">\n            <InputNumber\n              min={10}\n              value={formData.dateY}\n              onChange={(value) => onChange(value, 'dateY')}\n            />\n          </Form.Item>\n          <Form.Item label=\"字体颜色\">\n            <CompactPicker\n              color={formData.color}\n              onChangeComplete={onColorChange}\n            />\n          </Form.Item>\n          <Form.Item label=\"过期时间\">\n            <DatePicker\n              value={formData.delTime}\n              onChange={(value) => onChange(value, 'delTime')}\n            />\n          </Form.Item>\n\n          <Form.Item wrapperCol={{ offset: 8, span: 16 }}>\n            <Button type=\"primary\" htmlType=\"submit\">\n              保存\n            </Button>\n          </Form.Item>\n        </Form>\n      </Col>\n    </Row>\n  );\n};\n\nexport default Promotion;\n","import axios from 'axios';\nimport { message } from 'antd';\n\nconst http = axios.create({\n  baseURL: process.env.REACT_APP_SERVER_PORT,\n});\n\nhttp.interceptors.request.use(\n  (config) => {\n    if (localStorage.__web_token) {\n      config.headers.Authorization = 'Bearer ' + localStorage.__web_token;\n    }\n    return config;\n  },\n  (err) => {\n    return Promise.reject(err);\n  }\n);\n\nhttp.interceptors.response.use(\n  (res) => {\n    if (res.data.message) {\n      message.success(res.data.message);\n    }\n    return res;\n  },\n  (err) => {\n    if (err.response.status === 401) {\n      localStorage.removeItem('__web_token');\n      console.log(window.location.pathname.indexOf('login'));\n\n      if (window.location.pathname.indexOf('login') === -1) {\n        window.location.pathname = '/login';\n      }\n    }\n    if (err.response.data) {\n      message.error(err.response.data);\n      return Promise.reject(err);\n    }\n    return Promise.reject(err);\n  }\n);\n\nexport default http;\n","import http from './http';\n\nexport const LoginApi = (model) => http.post('/login', model);\n\nexport const RegisterApi = (model) => http.post('/register', model);\n\nexport const UserApi = () => http.get('/user');\n\nexport const UserEditApi = (model) => http.put('/user', model);\n\nexport const UrlApi = () => http.get('/url');\n\nexport const UrlAddApi = (model) => http.post('/url', model);\n\nexport const UrlEditApi = (model) => http.put('/url', model);\n\nexport const UrlDelApi = (params) => http.delete('/url', { params });\n\nexport const AgentApi = () => http.get('/agent');\n\nexport const AgentAddApi = (model) => http.post('/agent', model);\n\nexport const AgentEditApi = (model) => http.put('/agent', model);\n\nexport const AgentDelApi = (params) => http.delete('/agent', { params });\n\nexport const PromotionApi = () => http.get('/promotion');\n\nexport const PromotionEditApi = (model) => http.post('/promotion', model);\n\nexport const StatsApi = (model) => http.put('/stats', model);\n\nexport const StatsSearchApi = (model) => http.post('/stats', model);\n\nexport const HomeApi = () => http.get('/stats');\n\nexport const CommonImgApi = (model) => http.put('/common', model);\n\nexport const CommonDataApi = (model) => http.post('/common', model);\n"],"names":["beforeUpload","file","isJpgOrPng","type","message","useState","qrSize","qrX","qrY","fontSize","agentX","agentY","dateX","dateY","fileName","color","delTime","moment","Date","getTime","formData","setFormData","useEffect","PromotionApi","then","res","data","onChange","value","obj","gutter","span","style","padding","className","name","listType","showUploadList","action","process","headers","Authorization","localStorage","__web_token","info","status","response","src","display","width","top","left","id","size","fgColor","margin","labelCol","wrapperCol","initialValues","remember","onFinish","model","_d","unix","PromotionEditApi","autoComplete","label","min","step","onChangeComplete","hex","offset","htmlType","http","axios","baseURL","interceptors","request","use","config","err","Promise","reject","removeItem","console","log","window","location","pathname","indexOf","LoginApi","RegisterApi","UserApi","UserEditApi","UrlApi","UrlAddApi","UrlEditApi","UrlDelApi","params","AgentApi","AgentAddApi","AgentEditApi","AgentDelApi","StatsApi","HomeApi","CommonImgApi","CommonDataApi"],"sourceRoot":""}