{"version":3,"file":"static/js/795.1e6e88eb.chunk.js","mappings":"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","sources":["pages/User.jsx","utils/http.js","utils/api.js"],"sourcesContent":["import { Form, Input, Button } from 'antd';\nimport { useEffect } from 'react';\nimport { useNavigate } from 'react-router-dom';\nimport { UserApi, UserEditApi } from 'utils/api';\n\nconst formItemLayout = {\n  wrapperCol: {\n    xs: { span: 8 },\n    sm: { span: 6 },\n  },\n};\nconst User = () => {\n  const [form] = Form.useForm();\n  const navigate = useNavigate();\n\n  useEffect(() => {\n    UserApi().then((res) => {\n      form.setFieldsValue(res.data);\n    });\n  });\n\n  const onFinish = (values) => {\n    UserEditApi(values).then((res) => {\n      localStorage.removeItem('__web_token');\n      navigate('/login');\n    });\n  };\n  return (\n    <Form {...formItemLayout} form={form} name=\"user\" onFinish={onFinish}>\n      <Form.Item name=\"id\" style={{ display: 'none' }}>\n        <Input disabled />\n      </Form.Item>\n      <Form.Item\n        name=\"username\"\n        label=\"用户名\"\n        rules={[\n          {\n            required: true,\n            message: '请输入用户名',\n          },\n        ]}\n      >\n        <Input />\n      </Form.Item>\n\n      <Form.Item\n        name=\"password\"\n        label=\"密码\"\n        rules={[\n          {\n            required: true,\n            message: 'Please input your password!',\n          },\n        ]}\n      >\n        <Input.Password />\n      </Form.Item>\n\n      <Form.Item\n        name=\"confirm\"\n        label=\"确认密码\"\n        dependencies={['password']}\n        rules={[\n          {\n            required: true,\n            message: '再次输入密码',\n          },\n          ({ getFieldValue }) => ({\n            validator(_, value) {\n              if (!value || getFieldValue('password') === value) {\n                return Promise.resolve();\n              }\n              return Promise.reject(new Error('两次密码不一致'));\n            },\n          }),\n        ]}\n      >\n        <Input.Password />\n      </Form.Item>\n\n      <Form.Item>\n        <Button type=\"primary\" htmlType=\"submit\">\n          确认\n        </Button>\n      </Form.Item>\n    </Form>\n  );\n};\n\nexport default User;\n","import axios from 'axios';\nimport { message } from 'antd';\n\nconst http = axios.create({\n  baseURL: process.env.REACT_APP_SERVER_PORT,\n});\n\nhttp.interceptors.request.use(\n  (config) => {\n    if (localStorage.__web_token) {\n      config.headers.Authorization = 'Bearer ' + localStorage.__web_token;\n    }\n    return config;\n  },\n  (err) => {\n    return Promise.reject(err);\n  }\n);\n\nhttp.interceptors.response.use(\n  (res) => {\n    if (res.data.message) {\n      message.success(res.data.message);\n    }\n    return res;\n  },\n  (err) => {\n    if (err.response.status === 401) {\n      localStorage.removeItem('__web_token');\n      console.log(window.location.pathname.indexOf('login'));\n\n      if (window.location.pathname.indexOf('login') === -1) {\n        window.location.pathname = '/login';\n      }\n    }\n    if (err.response.data) {\n      message.error(err.response.data);\n      return Promise.reject(err);\n    }\n    return Promise.reject(err);\n  }\n);\n\nexport default http;\n","import http from './http';\n\nexport const LoginApi = (model) => http.post('/login', model);\n\nexport const RegisterApi = (model) => http.post('/register', model);\n\nexport const UserApi = () => http.get('/user');\n\nexport const UserEditApi = (model) => http.put('/user', model);\n\nexport const UrlApi = () => http.get('/url');\n\nexport const UrlAddApi = (model) => http.post('/url', model);\n\nexport const UrlEditApi = (model) => http.put('/url', model);\n\nexport const UrlDelApi = (params) => http.delete('/url', { params });\n\nexport const AgentApi = () => http.get('/agent');\n\nexport const AgentAddApi = (model) => http.post('/agent', model);\n\nexport const AgentEditApi = (model) => http.put('/agent', model);\n\nexport const AgentDelApi = (params) => http.delete('/agent', { params });\n\nexport const PromotionApi = () => http.get('/promotion');\n\nexport const PromotionEditApi = (model) => http.post('/promotion', model);\n\nexport const StatsApi = (model) => http.put('/stats', model);\n\nexport const StatsSearchApi = (model) => http.post('/stats', model);\n\nexport const HomeApi = () => http.get('/stats');\n\nexport const CommonImgApi = (model) => http.put('/common', model);\n\nexport const CommonDataApi = (model) => http.post('/common', model);\n"],"names":["formItemLayout","wrapperCol","xs","span","sm","Form","form","navigate","useNavigate","useEffect","UserApi","then","res","setFieldsValue","data","name","onFinish","values","UserEditApi","localStorage","removeItem","style","display","disabled","label","rules","required","message","dependencies","getFieldValue","validator","_","value","Promise","reject","Error","resolve","type","htmlType","http","axios","baseURL","process","interceptors","request","use","config","__web_token","headers","Authorization","err","response","status","console","log","window","location","pathname","indexOf","LoginApi","model","RegisterApi","UrlApi","UrlAddApi","UrlEditApi","UrlDelApi","params","AgentApi","AgentAddApi","AgentEditApi","AgentDelApi","PromotionApi","PromotionEditApi","StatsApi","HomeApi","CommonImgApi","CommonDataApi"],"sourceRoot":""}