"use strict";(self.webpackChunkweb=self.webpackChunkweb||[]).push([[357],{4357:function(e,n,t){t.r(n);var r=t(1413),i=t(9439),u=t(6515),o=t(7496),s=t(2425),c=t(3734),a=t(4964),l=t(4195),d=t(9529),f=t(2791),m=t(7985),h=t(184),p=u.Z.Column;n.default=function(){var e=o.Z.useForm(),n=(0,i.Z)(e,1)[0],t=o.Z.useForm(),x=(0,i.Z)(t,1)[0],g=(0,f.useState)(!1),Z=(0,i.Z)(g,2),j=Z[0],w=Z[1],k=(0,f.useState)(),y=(0,i.Z)(k,2),_=y[0],b=y[1],I=(0,f.useState)(),v=(0,i.Z)(I,2),F=v[0],q=v[1];(0,f.useEffect)((function(){S()}),[]);var S=function(){(0,m.YX)().then((function(e){var n=[],t=[];e.data.data.forEach((function(e){n.push((0,r.Z)((0,r.Z)({},e),{},{key:e._id,nick:e.url.nick,url:e.url._id,downurl:"http://"+window.location.host+"/#/download/"+e._id,createTime:new Date(e.createTime).toLocaleString()}))})),e.data.urls.forEach((function(e){t.push((0,r.Z)((0,r.Z)({},e),{},{key:e._id,label:e.nick,value:e._id}))})),q(t),b(n)}))};return(0,h.jsxs)("div",{children:[(0,h.jsxs)(o.Z,{form:n,name:"horizontal_login",layout:"inline",onFinish:function(e){(0,m.Wk)(e).then((function(e){n.resetFields(),S()}))},children:[(0,h.jsx)(o.Z.Item,{name:"name",rules:[{required:!0,message:"\u8bf7\u8f93\u5165\u4ee3\u7406\u540d\u79f0!"}],children:(0,h.jsx)(s.Z,{prefix:(0,h.jsx)(d.Z,{}),placeholder:"\u4ee3\u7406\u540d\u79f0"})}),(0,h.jsx)(o.Z.Item,{name:"url",style:{width:"600px"},rules:[{required:!0,message:"\u8bf7\u9009\u62e9\u4ee3\u7406\u7684\u8df3\u8f6c\u94fe\u63a5!"}],children:(0,h.jsx)(c.Z,{options:F,placeholder:"\u8df3\u8f6c\u94fe\u63a5"})}),(0,h.jsx)(o.Z.Item,{shouldUpdate:!0,children:function(){return(0,h.jsx)(a.Z,{type:"primary",htmlType:"submit",disabled:!n.isFieldsTouched(!0)||!!n.getFieldsError().filter((function(e){return e.errors.length})).length,children:"\u6dfb\u52a0"})}})]}),(0,h.jsxs)(u.Z,{dataSource:_,children:[(0,h.jsx)(p,{title:"\u6635\u79f0",dataIndex:"name"},"name"),(0,h.jsx)(p,{title:"\u94fe\u63a5\u6807\u8bc6",dataIndex:"nick"},"nick"),(0,h.jsx)(p,{title:"\u4e0b\u8f7d\u5730\u5740",dataIndex:"downurl"},"downurl"),(0,h.jsx)(p,{title:"\u65f6\u95f4",dataIndex:"createTime"},"createTime"),(0,h.jsx)(p,{title:"\u64cd\u4f5c",align:"right",render:function(e,n){return(0,h.jsxs)("div",{children:[(0,h.jsx)(a.Z,{type:"primary",style:{marginRight:"3px"},onClick:function(){return function(e){x.setFieldsValue(e),w(!0)}(n)},children:"\u7f16\u8f91"}),(0,h.jsx)(a.Z,{type:"primary",danger:!0,onClick:function(){return function(e){var n={id:e};(0,m.Iq)(n).then((function(){var n=_.filter((function(n){return n.key!==e}));b(n)}))}(n.key)},children:"\u5220\u9664"})]})}},"action")]}),(0,h.jsx)(l.Z,{title:"\u7f16\u8f91\u4ee3\u7406",placement:"right",onClose:function(){x.resetFields(),w(!1)},visible:j,children:(0,h.jsxs)(o.Z,{form:x,name:"horizontal_login",onFinish:function(e){(0,m.z5)(e).then((function(e){S(),x.resetFields(),w(!1)}))},children:[(0,h.jsx)(o.Z.Item,{style:{display:"none"},name:"_id",children:(0,h.jsx)(s.Z,{disabled:!0})}),(0,h.jsx)(o.Z.Item,{name:"name",rules:[{required:!0,message:"\u8bf7\u8f93\u5165\u4ee3\u7406\u540d\u79f0!"}],children:(0,h.jsx)(s.Z,{prefix:(0,h.jsx)(d.Z,{}),placeholder:"\u4ee3\u7406\u540d\u79f0"})}),(0,h.jsx)(o.Z.Item,{name:"url",rules:[{required:!0,message:"\u8bf7\u9009\u62e9\u4ee3\u7406\u7684\u8df3\u8f6c\u94fe\u63a5!"}],children:(0,h.jsx)(c.Z,{options:F,placeholder:"\u8df3\u8f6c\u94fe\u63a5"})}),(0,h.jsx)(o.Z.Item,{shouldUpdate:!0,children:function(){return(0,h.jsx)(a.Z,{type:"primary",htmlType:"submit",children:"\u4fee\u6539"})}})]})})]})}},7985:function(e,n,t){t.d(n,{Wk:function(){return g},YX:function(){return x},Iq:function(){return j},z5:function(){return Z},dq:function(){return I},hV:function(){return b},NG:function(){return _},Ig:function(){return c},bK:function(){return w},ll:function(){return k},pk:function(){return a},P1:function(){return y},s0:function(){return m},E9:function(){return f},uX:function(){return p},U4:function(){return h},Wj:function(){return l},tN:function(){return d}});var r=t(4569),i=t.n(r),u=t(2692),o=i().create({baseURL:"/web/"});o.interceptors.request.use((function(e){return localStorage.__web_token&&(e.headers.Authorization="Bearer "+localStorage.__web_token),e}),(function(e){return Promise.reject(e)})),o.interceptors.response.use((function(e){return e.data.message&&u.ZP.success(e.data.message),e}),(function(e){return 401===e.response.status&&(localStorage.removeItem("__web_token"),console.log(window.location.pathname.indexOf("login")),-1===window.location.pathname.indexOf("login")&&(window.location.pathname="/login")),e.response.data?(u.ZP.error(e.response.data),Promise.reject(e)):Promise.reject(e)}));var s=o,c=function(e){return s.post("/login",e)},a=function(e){return s.post("/register",e)},l=function(){return s.get("/user")},d=function(e){return s.put("/user",e)},f=function(){return s.get("/url")},m=function(e){return s.post("/url",e)},h=function(e){return s.put("/url",e)},p=function(e){return s.delete("/url",{params:e})},x=function(){return s.get("/agent")},g=function(e){return s.post("/agent",e)},Z=function(e){return s.put("/agent",e)},j=function(e){return s.delete("/agent",{params:e})},w=function(){return s.get("/promotion")},k=function(e){return s.post("/promotion",e)},y=function(e){return s.put("/stats",e)},_=function(){return s.get("/stats")},b=function(e){return s.put("/common",e)},I=function(e){return s.post("/common",e)}}}]);
//# sourceMappingURL=357.2620d1c2.chunk.js.map